<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>首页</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        div {
            position: fixed;
            top: 30px;
            right: 30px;
        }
    </style>
</head>
<body>
    我是首页
    <h1></h1>
    <div><a href="javascript:;" onclick="loginout()">退出登录</a></div>
    <script>
        var x = document.cookie;
        var h1 = document.querySelector('h1');
        if(localStorage.getItem('userinfo')) {
            var userinfo = JSON.parse(localStorage.getItem('userinfo'));
            h1.innerHTML = '欢迎光临'+userinfo.name;
        } else {
            location.href = 'login.html';
        }
        function loginout() {
            localStorage.removeItem('userinfo');
            location.reload();
        }
        // if(document.cookie) {
        //     console.log(document.cookie);
        //     var userinfo = document.cookie;
        //     h1.innerHTML = '欢迎光临'+userinfo.name;
        // } else {
        //     location.href = 'login.html';
        // }
        // function loginout() {
        //     delCookie('userinfo');
        //     location.reload();
        // }
        // function delCookie(name)    {
        //     var exp = new Date();
        //     exp.setTime(exp.getTime() - 1);
        //     var cval = getCookie(name);
        //     if(cval!=null) {
        //         document.cookie=name+"="+cval+";expires="+exp.toGMTString();
        //         console.log(document.cookie=name+"="+cval+";expires="+exp.toGMTString());
        //     }   
        // }
        // function getCookie(name) {
        //     var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");
        //     console.log(reg);
        //     console.log(document.cookie.match(reg));
        //     if (arr=document.cookie.match(reg)) {
        //         return unescape(arr[2]);
        //     } else {
        //         return null;
        //     }
        // }
    </script>
</body>
</html>